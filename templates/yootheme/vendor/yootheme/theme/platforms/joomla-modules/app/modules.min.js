webpackJsonp([4],{542:function(e,t,o){var n,i,l={};n=o(543),Object.keys(n).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.warn("[vue-loader] vendor/yootheme/theme/platforms/joomla-modules/app/modules.vue: named exports in *.vue files are ignored."),i=o(550),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var s="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(s.template=i),s.computed||(s.computed={}),Object.keys(l).forEach(function(e){var t=l[e];s.computed[e]=function(){return t}})},543:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(6),l=n(i),s=o(23),u=n(s),d=o(2),a=n(d),r=o(3),c=n(r),m=o(544),f=n(m),p=o(547),h=n(p),v=o(10),b={name:"modules",props:["config","values"],data:function(){return{module:null,visible:{},builder:{},modified:!1,height:"500px",disabled:!1,loaded:!1,editScreen:!1,onlyVisible:!1}},watch:{disabled:function(e){this.modal&&(this.modal.escClose=!e,this.modal.bgClose=!e)}},computed:{url:function(){return this.module&&window.$config.url+"/"+this.config.url+"&tmpl=component&"+(this.module.id?"task=module.edit&id="+this.module.id:"view=select")},window:{get:function(){return(0,u.default)(this.$els,"iframe.contentWindow",{})},cache:!1},document:{get:function(){return(0,u.default)(this.$els,"iframe.contentDocument",{})},cache:!1},positions:function(){var e=this;return this.config.positions.map(function(t){return{name:t||"none",modules:e.config.modules.filter(function(o){return!(e.onlyVisible&&void 0===e.get(o)||o.position!==t&&(t||~e.config.positions.indexOf(o.position)))})}})}},methods:{get:function(e){return this.visible[e.id]},edit:function(e){var t=this,o=function(){t.document.body.style.padding="30px",t.editScreen=t.window.Joomla,t.editScreen||(0,a.default)("#new-modules-list a",t.document).each(function(e,t){return(0,a.default)(t).attr("href",(0,a.default)(t).attr("href").concat("&tmpl=component"))})};if(this.module=e,this.editScreen=!!e.id,this.$refs.modal.open().then(function(){return t.$nextTick(function(){"complete"===t.document.readyState&&o(),(0,v.on)(t.$els.iframe,"load",function(){t.loaded=!0,o()})})}),!this.modal){this.modal=this.$refs.modal.modal;var n=!1;this.modal.$el.on({resize:function(){return t.height=t.$els.overflow.style.maxHeight},beforeshow:function(){n=!1},beforehide:function(){if(!n&&t.window.Joomla)return t.window.Joomla.submitbutton("module.cancel"),(0,v.on)(t.window,"unload",function(){n=!0,t.modal.hide()}),!1},hide:function(){t.loaded=!1}})}},save:function(){var e=this,t=!0,o=(0,a.default)('[name="adminForm"]',this.document),n=function(){t=!1,(0,a.default)(e.$els.iframe).one("load",function(){e.disabled=!1,Promise.all([e.$http.get("modules").then(function(t){var o=t.body;return e.config.modules=o}),e.$http.get("positions").then(function(t){var o=t.body;return e.config.positions=o})]).then(function(){return e.$trigger("reloadPreview")})})};this.disabled=!0,o.one("submit",n),setTimeout(function(){o.off("submit",n),t&&(e.disabled=!1)}),this.window.Joomla.submitbutton("module.apply")},hover:function(e,t){var o=this.get(t);o&&(0,a.default)(o).toggleClass("yo-hover","mouseenter"===e.type)},editBuilder:function(e){var t=this,o=e.id,n=e.title;this.watcher&&(this.watcher(),this.builder={},this.modified=!1),this.$http.get("module",{params:{id:o}}).then(function(e){var i=e.body;(0,l.default)(i.content)&&c.default.set(t.builder,"content",i.content),t.$sidebar.openPanel("builder.module",{title:"Builder",heading:!1,width:600,fields:{content:{title:n,type:"builder",prefix:"module-"+o,save:function(){t.$http.post("module",{id:o,content:t.builder.content}).then(function(){return t.modified=!1})},cancel:function(){t.modified=null}}}},t.builder),t.watcher=t.$watch("builder",function(e){var n=e.content;!1===t.modified?t.modified=!0:null===t.modified&&(t.modified=!1),t.$trigger("loadPreview",{module:{id:o,content:JSON.stringify(n)}})},{deep:!0})})}},events:{readyPreview:function(e,t){var o={};(0,a.default)('[id^="module-"]',t.document).each(function(e,t){return o[t.id.substring(7)]=t}),this.visible=o},closePanel:function(e,t){"builder.module"===t.name&&this.modified&&(window.confirm(this.$trans("The changes you made will be lost if you navigate away from this page."))?this.$trigger("reloadPreview"):e.close=!1)}}};c.default.fields.selectModule=f.default,c.default.fields.selectPosition=h.default,c.default.components["joomla-modules"]=b,t.default=b},544:function(e,t,o){var n,i,l={};n=o(545),Object.keys(n).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.warn("[vue-loader] vendor/yootheme/theme/platforms/joomla-modules/app/components/field-select-module.vue: named exports in *.vue files are ignored."),i=o(546),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var s="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(s.template=i),s.computed||(s.computed={}),Object.keys(l).forEach(function(e){var t=l[e];s.computed[e]=function(){return t}})},545:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(14),l=n(i),s=o(31),u=n(s),d=o(24),a=n(d);t.default={data:function(){var e=this.$app.sections["joomla-modules"];return{types:e.types,modules:e.modules}},watch:{value:function(e){var t=(0,a.default)(this.modules,["id",e]);t&&this.$parent.$set("values.type",t.module)}},computed:{options:function(){var e=this,t={};return(0,l.default)(this.types,function(o,n){var i=(0,u.default)(e.modules,{module:n});i.length&&(t[o]=i.map(function(e){var t=e.id;return{text:e.title,value:t}}))}),t}}}},546:function(e,t){e.exports='\n\n<select class="uk-select" :class="class" v-bind="attrs" v-model="value">\n    <option value="">{{ $trans(\'- Select Module -\') }}</option>\n    <optgroup v-for="(label, opts) in options" :label="label">\n        <option v-for="opt in opts" :value="opt.value">{{ opt.text }}</option>\n    </optgroup>\n</select>\n\n'},547:function(e,t,o){var n,i,l={};n=o(548),Object.keys(n).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.warn("[vue-loader] vendor/yootheme/theme/platforms/joomla-modules/app/components/field-select-position.vue: named exports in *.vue files are ignored."),i=o(549),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var s="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(s.template=i),s.computed||(s.computed={}),Object.keys(l).forEach(function(e){var t=l[e];s.computed[e]=function(){return t}})},548:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={computed:{positions:function(){return this.$app.sections["joomla-modules"].positions.filter(function(e){return e})}}}},549:function(e,t){e.exports='\n\n<select class="uk-select" :class="class" v-bind="attrs" v-model="value">\n    <option value="">{{ $trans(\'- Select Position -\') }}</option>\n    <option v-for="position in positions" :value="position">{{ position }}</option>\n</select>\n\n'},550:function(e,t){e.exports='\n\n<div>\n\n    <label><input type="checkbox" class="uk-checkbox" v-model="onlyVisible"> {{ $trans(\'Visible on this page\') }}</label>\n\n    <p class="uk-text-muted uk-margin-small">Only display modules that are published and visible on this page.</p>\n\n    <template v-for="position in positions">\n        <template v-if="position.modules.length">\n\n            <h3 class="yo-sidebar-subheading"><span>{{ position.name }}</span></h3>\n\n            <ul class="uk-nav uk-nav-default yo-sidebar-marginless uk-text-capitalize yo-nav-iconnav">\n                <li :class="{\'yo-highlight\': !onlyVisible && get(module)}" v-for="module in position.modules" track-by="id" @mouseenter="hover($event, module)" @mouseleave="hover($event, module)">\n                    <a href="#" @click.prevent="edit(module)">{{ module.title }}</a>\n\n                    <div class="yo-label-builder uk-position-right uk-flex uk-flex-middle" @click.prevent="editBuilder(module)" v-if="module.module == \'mod_yootheme_builder\'">\n                        <span class="uk-label">Builder</span>\n                    </div>\n\n                </li>\n            </ul>\n\n        </template>\n    </template>\n\n    <button class="uk-button uk-button-default uk-width-1-1 uk-margin-medium-top" type="button" @click.prevent="edit({})">{{ $trans(\'New Module\') }}</button>\n\n    <modal container v-ref:modal>\n\n        <div class="uk-modal-header">\n            <h2 class="uk-modal-title">{{ module.id ? $trans(\'Edit Module\') : $trans(\'Add Module\') }}</h2>\n        </div>\n\n        <div uk-overflow-auto v-el:overflow>\n            <iframe :style="{height: height, width: \'100%\'}" :src="url" v-el:iframe></iframe>\n        </div>\n\n        <div class="uk-modal-footer uk-text-right">\n            <button class="uk-button uk-button-text uk-modal-close uk-margin-small-right" :disabled="disabled">{{ $trans(\'Cancel\') }}</button>\n            <button class="uk-button uk-button-primary" :disabled="disabled || !loaded" @click.prevent="save" v-show="editScreen">{{ $trans(\'Save\') }}</button>\n        </div>\n\n    </modal>\n\n</div>\n\n'}},[542]);